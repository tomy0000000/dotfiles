name: Test macOS features

on:
  push:
  pull_request:

jobs:
  macOS:
    runs-on: macos-latest
    strategy:
      fail-fast: false
      matrix:
        features: [
            "ansible",
            "clean",
            "cli-network",
            "core",
            # "git", # CI machine contains existed .gitconfig file
            "javascript",
            "macos-alfred",
            "macos-app-dev",
            "macos-app-private",
            "macos-app-work",
            "macos-appcleaner",
            "macos-brew",
            "macos-clean",
            "macos-cleanshot",
            "macos-cli-network",
            "macos-cli-useful",
            "macos-core",
            "macos-docker",
            "macos-finder",
            "macos-font",
            "macos-git",
            "macos-hammerspoon",
            "macos-icon",
            "macos-iterm",
            "macos-javascript",
            "macos-markedit",
            "macos-micro",
            "macos-nano",
            # "macos-one-password", # mas can't run without login on GitHub Actions
            "macos-perl",
            "macos-popclip",
            "macos-quicklook",
            "macos-screensaver",
            "macos-service-workflow",
            "macos-settings",
            "macos-shellcheck",
            "macos-stow",
            "macos-sublime",
            "macos-terminal",
            "macos-touch-id-sudo",
            "macos-tower",
            # "macos-xcode", # mas can't run without login on GitHub Actions
            "macos-zsh",
            "micro",
            "nano",
            "python",
            "stow",
            "ubuntu-dropbox",
            "ubuntu-essential",
            "ubuntu-locale-zhtw",
            "ubuntu-ssh",
            "ubuntu-tz-taipei",
            "zsh",
          ]
    steps:
      - name: ðŸ›’ Checkout
        uses: actions/checkout@v4

      - name: ðŸ§ª Test "${{ matrix.features }}"
        run: make ${{ matrix.features }}
